/*! templebar 15-12-2013 */
(function(){var a,b,c,d,e,f,g,h,i,j,k=[].slice;i=function(a,b,c){return a&&a.call?i(a.call(c||this,b),b,c):a},a="__defer",d=function(b){return b[a]=1,b},f=function(b){return!!b[a]},j=function(b,c,d){return b&&b.call&&!b[a]&&i(b,c,d)||b},g=function(a){return a.slice(-1)[0]},h=function(a,b){return a.push(b)},e=function(a){var b;return b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},String(a).replace(/[&<>"'\/]/g,function(a){return b[a]})},b="a abbr acronym address applet article aside audio b basefont bdi bdo big blockquote body button canvas caption center cite code colgroup command datalist dd del details dfn dialog dir div dl dt em fieldset figcaption figure font footer form frame frameset h1 head header html i iframe ins kbd label legend li map mark menu meta meter nav noframes noscript object ol optgroup option output p pre progress q rp rt ruby s samp script section select small span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr tt u ul var video".split(" "),c="area base br col embed hr img input keygen link menuitem meta param source track wbr".split(" "),module.exports=function(a){var l,m,n,o,p,q,r,s,t,u,v,w;return l={},a.each(c,function(a){return l[a]=1}),w=function(b){return a.isString(b)||a.isNumber(b)},v=function(a,b,c){return null==c&&(c=""),null!=b&&(a.length&&w(g(a))&&w(b)?a[a.length-1]+=c+b:(a.length&&h(a,c),h(a,b))),a},o=function(b,c,d){return a.map(b,function(a){return i(a,c,d)}).join("")},n=function(){var b,c,d;return b=1<=arguments.length?k.call(arguments,0):[],c=null!=(d=b.shift())?d:[],a.each(b,function(b){return a.each(b,function(a){return v(c,a,"")})}),c},t=function(b,c){var d;return d=[],a.each(b,function(a,b){return v(d,a,0===b&&""||c)}),d},p=function(b){var c,d,e,f,g,h;return e=[],c={},h={},f=function(b,c){return a(b).keys().each(function(a){return c(a,b[a])})},d=function(b,c,d){return n(e,[" ",b,'="']),n(e,a.flatten([c]),d),v(e,'"')},a.each(b,function(b){if(b=j(b),a.isArray(b))throw"unexpected Array "+b+" in attributes";return a.isPlainObject(b)?f(b,function(b,d){return d=j(d),"style"===b||"class"===b?(null==c[b]&&(c[b]=[]),c[b]=c[b].concat(a.flatten([d]))):w(d)||deferred(d)?h[b]=d:void 0}):v(e,b," ")}),h[g="id"]&&d(g,h[g]),f(c,function(b,c){var e;return e={style:";"}[b]||" ",d(b,t(a.map(c,j),e))}),f(h,function(a,b){return"id"!==a?d(a,b):void 0}),e},q=function(b){var c;return c=[],a.each(b,function(b){if(a.isArray(b))return n(c,q(b));if(w(b)||a.isFunction(b))return v(c,j(b));throw"unexpected "+typeof b+" '"+b+"' in node content"}),c},r=function(a,b,c){var e,g;return e=["<"],g=function(a,d){return n(a,[d],p(b)),l[d]?v(a,"/>"):n(a,[">"],q(c),["</",d,">"])},f(a=j(a))?h(e,d(function(b,c){return o(g([],i(a,b,c)))})):g(e,a),e},u=function(b){var c,d,e,f,g,i;return g=[[],[]],a.isString(c=b[0])&&(d={},(f=null!=(i=c.match(/\#(-?[_a-zA-Z]+[_a-zA-Z0-9-]*)/g))?i[0]:void 0)&&(d.id=f.slice(1)),(e=c.match(/\.(-?[_a-zA-Z]+[_a-zA-Z0-9-]*)/g))&&(d["class"]=a.map(e,function(a){return a.slice(1)})),(d.id||d["class"])&&(h(g[0],d),b.shift())),a.each(b,function(b){return a.isPlainObject(b)?h(g[0],b):h(g[1],b)}),g},s=function(a,b){var c;return c=function(a,b){return null==a?void 0:1===b.length?a[b[0]]:c(a[b.shift()],b)},c(b,a.split("."))},m={},m.tag=function(){var a,b,c,d;return b=arguments[0],a=2<=arguments.length?k.call(arguments,1):[],c=u(a),d=r(b,c[0],c[1]),function(a){return o(d,a)}},a.each(c.concat(b),function(a){return m[a]=function(){var b;return b=1<=arguments.length?k.call(arguments,0):[],m.tag.apply(m,[a].concat(k.call(b)))}}),m.d=m.div,m.$map=m.$m=function(b,c){var d;return d=a.map(b,c),function(a){return o(d,a)}},m.$var=m.$v=function(a,b){return d(function(c){var d;return d=s(a,c),!b&&e(d)||d})},m.$with=m.$w=function(a,b){return d(function(c){return b(s(a,c))})},m.$fun=m.$f=function(a){return d(function(b){return a.call(this,b)})},m.$closure=m.$c=function(b,c,d){return c.apply(null!=d?d:this,a.map(b.split(" "),function(a){return m[a]}))},m}}).call(this);